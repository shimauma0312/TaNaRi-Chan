name: ãƒ–ãƒ©ãƒ³ãƒåˆ¶é™ã¨PRæ¤œè¨¼

on:
  pull_request:
    branches:
      - main
      - develop  # develop ãƒ–ãƒ©ãƒ³ãƒã¸ã®PRã‚‚ç›£è¦–

jobs:
  check_base_branch:
    runs-on: ubuntu-latest
    steps:
      - name: ãƒªãƒã‚¸ãƒˆãƒªã‚’ãƒã‚§ãƒƒã‚¯ã‚¢ã‚¦ãƒˆ
        uses: actions/checkout@v4
      
      - name: ãƒ–ãƒ©ãƒ³ãƒåˆ¶é™ãƒã‚§ãƒƒã‚¯
        run: |
          TARGET_BRANCH="${{ github.event.pull_request.base.ref }}"
          SOURCE_BRANCH="${{ github.event.pull_request.head.ref }}"
          
          echo "ğŸ” ãƒ–ãƒ©ãƒ³ãƒåˆ¶é™ãƒã‚§ãƒƒã‚¯å®Ÿè¡Œä¸­..."
          echo "  - ã‚½ãƒ¼ã‚¹: $SOURCE_BRANCH"
          echo "  - ã‚¿ãƒ¼ã‚²ãƒƒãƒˆ: $TARGET_BRANCH"
          
          if [[ "$TARGET_BRANCH" == "main" ]]; then
            if [[ "$SOURCE_BRANCH" != "develop" ]]; then
              echo "âŒ ã‚¨ãƒ©ãƒ¼: mainãƒ–ãƒ©ãƒ³ãƒã¸ã®PRã¯developãƒ–ãƒ©ãƒ³ãƒã‹ã‚‰ã®ã¿è¨±å¯ã•ã‚Œã¦ã„ã¾ã™ã€‚"
              echo "ğŸ“ ã¾ãšdevelopãƒ–ãƒ©ãƒ³ãƒã«PRã‚’ä½œæˆã—ã¦ãã ã•ã„ã€‚"
              echo "ğŸ”„ ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼: feature â†’ develop â†’ main"
              exit 1
            else
              echo "âœ… æ­£å¸¸: developãƒ–ãƒ©ãƒ³ãƒã‹ã‚‰ã®PRã§ã™ã€‚"
            fi
          elif [[ "$TARGET_BRANCH" == "develop" ]]; then
            echo "âœ… æ­£å¸¸: developãƒ–ãƒ©ãƒ³ãƒã¸ã®PRã§ã™ã€‚"
            echo "ğŸŒ¿ Feature ãƒ–ãƒ©ãƒ³ãƒã‹ã‚‰ã®PRã‚’å—ã‘ä»˜ã‘ã¦ã„ã¾ã™ã€‚"
          fi
      
      - name: PRæƒ…å ±ã‚’è¡¨ç¤º
        run: |
          echo "ğŸ“‹ PRæƒ…å ±:"
          echo "  - ãƒ–ãƒ©ãƒ³ãƒ: ${{ github.event.pull_request.head.ref }} â†’ ${{ github.event.pull_request.base.ref }}"
          echo "  - ã‚¿ã‚¤ãƒˆãƒ«: ${{ github.event.pull_request.title }}"
          echo "  - ä½œæˆè€…: ${{ github.event.pull_request.user.login }}"
